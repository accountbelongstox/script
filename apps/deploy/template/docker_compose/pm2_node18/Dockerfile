FROM node:18
ENV EXPOSE_PORT 1800-3999
ENV HOST 0.0.0.0
ENV APP_ROOT /www
ENV SERVER_ROOT /www/pm2_node
ENV EXPOSE_HTTP 80
ENV EXPOSE_HTTPS 443
EXPOSE $EXPOSE_PORT $EXPOSE_HTTP $EXPOSE_HTTPS
WORKDIR $SERVER_ROOT
COPY app .
COPY install.sh .
CMD sh -c 'chmod +x /www/pm2_node/install.sh && /www/pm2_node/install.sh'